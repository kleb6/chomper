#!/usr/bin/env raku

my $cpp-dir       = "lib/Chomper/Cpp";
my $py3-dir       = "lib/Chomper/Py3";
my $rust-dir      = "lib/Chomper/Rust";
my $translate-dir = "lib/Chomper/Translate";
my $chomper-dir   = "lib/Chomper";

my @cpp-files = <
cpp-actions.rakumod
cpp-cleaning.rakumod
cpp-translate.rakumod
gcpp-abstract-declarator.rakumod
gcpp-access.rakumod
gcpp-additive-expression.rakumod
gcpp-align.rakumod
gcpp-and-expression.rakumod
gcpp-asm.rakumod
gcpp-assignment.rakumod
gcpp-attr.rakumod
gcpp-attributed-statement.rakumod
gcpp-balanced.rakumod
gcpp-base.rakumod
gcpp-bin.rakumod
gcpp-bool.rakumod
gcpp-cast-expression.rakumod
gcpp-char.rakumod
gcpp-class-or-decltype.rakumod
gcpp-class.rakumod
gcpp-comment.rakumod
gcpp-condition.rakumod
gcpp-conditional-expression.rakumod
gcpp-constructor.rakumod
gcpp-conversion.rakumod
gcpp-cv.rakumod
gcpp-dec.rakumod
gcpp-decl-specifier.rakumod
gcpp-declaration.rakumod
gcpp-declarator.rakumod
gcpp-decltype.rakumod
gcpp-delete-expression.rakumod
gcpp-digit.rakumod
gcpp-elaborated-type-specifier.rakumod
gcpp-encoding.rakumod
gcpp-enum.rakumod
gcpp-eq-expression.rakumod
gcpp-escape.rakumod
gcpp-exception.rakumod
gcpp-expression.rakumod
gcpp-float.rakumod
gcpp-for-init.rakumod
gcpp-for-range.rakumod
gcpp-function.rakumod
gcpp-hex.rakumod
gcpp-id-expression.rakumod
gcpp-ident.rakumod
gcpp-instantiate.rakumod
gcpp-integer-literal.rakumod
gcpp-iteration.rakumod
gcpp-jump-statement.rakumod
gcpp-keywords.rakumod
gcpp-labeled-statement.rakumod
gcpp-lambda.rakumod
gcpp-linkage.rakumod
gcpp-literal.rakumod
gcpp-logical-expression.rakumod
gcpp-macro.rakumod
gcpp-mem-initializer.rakumod
gcpp-member.rakumod
gcpp-multiplicative-expression.rakumod
gcpp-namespace.rakumod
gcpp-nested-name.rakumod
gcpp-new.rakumod
gcpp-no-ptr.rakumod
gcpp-noexcept.rakumod
gcpp-oct.rakumod
gcpp-operator-id.rakumod
gcpp-operator.rakumod
gcpp-or-expression.rakumod
gcpp-param.rakumod
gcpp-postfix-expression.rakumod
gcpp-primary-expression.rakumod
gcpp-pseudo-dtor.rakumod
gcpp-ptr-declarator.rakumod
gcpp-ptr-member.rakumod
gcpp-ptr-operator.rakumod
gcpp-ptr.rakumod
gcpp-punctuation.rakumod
gcpp-pure.rakumod
gcpp-ref.rakumod
gcpp-relational-expression.rakumod
gcpp-return-statement.rakumod
gcpp-roles.rakumod
gcpp-selection.rakumod
gcpp-shift-expression.rakumod
gcpp-simple-type-specifier.rakumod
gcpp-specialize.rakumod
gcpp-statement.rakumod
gcpp-storage-class.rakumod
gcpp-str.rakumod
gcpp-suffix.rakumod
gcpp-template.rakumod
gcpp-token.rakumod
gcpp-translation-unit.rakumod
gcpp-try.rakumod
gcpp-type-id.rakumod
gcpp-type-modifier.rakumod
gcpp-type-name.rakumod
gcpp-type-param.rakumod
gcpp-type-specifier.rakumod
gcpp-typedef.rakumod
gcpp-unary-expression.rakumod
gcpp-user-defined-literal.rakumod
gcpp-using-directive.rakumod
gcpp-virtual.rakumod
gcpp.rakumod
generate-cpp-model.rakumod
>;

my @rust-files = <
grust-array-expression.rakumod
grust-ascii.rakumod
grust-assoc-items.rakumod
grust-block-comment.rakumod
grust-block-expressions.rakumod
grust-boolean-literal.rakumod
grust-byte-literal.rakumod
grust-byte-string-literal.rakumod
grust-cfg-attr.rakumod
grust-char-literal.rakumod
grust-closure-expressions.rakumod
grust-comment.rakumod
grust-configuration.rakumod
grust-crate-grammar.rakumod
grust-crate.rakumod
grust-delimiters.rakumod
grust-doc-comment.rakumod
grust-enumerations.rakumod
grust-expressions.rakumod
grust-external-blocks.rakumod
grust-float-literal.rakumod
grust-function-pointer-types.rakumod
grust-functions.rakumod
grust-generic-args.rakumod
grust-generic-parameters.rakumod
grust-identifiers.rakumod
grust-if-expressions.rakumod
grust-impl-trait.rakumod
grust-int-literal.rakumod
grust-item.rakumod
grust-jump-expressions.rakumod
grust-lifetimes.rakumod
grust-line-comment.rakumod
grust-literal-pattern.rakumod
grust-literal.rakumod
grust-loop-expression.rakumod
grust-macros.rakumod
grust-match-expressions.rakumod
grust-meta-item.rakumod
grust-path-expressions.rakumod
grust-paths.rakumod
grust-pattern-expressions.rakumod
grust-punctuation.rakumod
grust-range-patterns.rakumod
grust-reference-patterns.rakumod
grust-reserved-keywords.rakumod
grust-statements.rakumod
grust-strict-keywords.rakumod
grust-string-literal.rakumod
grust-struct-expressions.rakumod
grust-struct-patterns.rakumod
grust-structs.rakumod
grust-tokens.rakumod
grust-trait-objects.rakumod
grust-traits.rakumod
grust-tuple-expression.rakumod
grust-tuple-struct-patterns.rakumod
grust-type-alias.rakumod
grust-type-path.rakumod
grust-types.rakumod
grust-unions.rakumod
grust-use-declaration-grammar.rakumod
grust-use-declaration.rakumod
grust-visibility.rakumod
grust-weak-keywords.rakumod
grust-where-clause.rakumod
grust-whitespace.rakumod
grust-xid.rakumod
indent-rust-named-type-list.rakumod
infer-rustdoc.rakumod
rust-crate-parse.rakumod
rust-ffi.rakumod
rust-grammar.rakumod
rust-translate.rakumod
>;

my @py3-files = <
pyrust.rakumod
gpython3-indent.rakumod
gpython3-keywords.rakumod
gpython3-name.rakumod
gpython3-numeric.rakumod
gpython3-operators.rakumod
gpython3-strings.rakumod
gpython3-typedargs.rakumod
gpython3-varargs.rakumod
gpython3.rakumod
python-to-rust-actions.rakumod
python3-args.rakumod
python3-class.rakumod
python3-comment.rakumod
python3-compound.rakumod
python3-comprehension.rakumod
python3-decorator.rakumod
python3-dunder-init.rakumod
python3-dunder.rakumod
python3-expr.rakumod
python3-func.rakumod
python3-lambdef.rakumod
python3-prelude.rakumod
python3-stmt.rakumod
python3-suite.rakumod
python3-varargs.rakumod
>;

my @translate-files = <
to-rust-ident.rakumod
to-rust-params.rakumod
to-rust-type.rakumod
translate-cpp.rakumod
translate-io.rakumod
translate-ir.rakumod
translate-postfix-expression-list.rakumod
translate-python.rakumod
translator.rakumod
>;

my @chomper-files = <
abstract_functions.rakumod
align-column.rakumod
align.rakumod
api.rakumod
args.rakumod
avoid-keywords.rakumod
block-comment.rakumod
braced-array-literal.rakumod
caffe-workspace.rakumod
cargo-workspace.rakumod
cargo.rakumod
case.rakumod
clean-macro.rakumod
comments.rakumod
constexpr_globals.rakumod
constructor.rakumod
crates.rakumod
ctor_header.rakumod
dequote.rakumod
destructor.rakumod
dot.rakumod
doxy-comment.rakumod
enum_members.rakumod
feedback.rakumod
file-sort-uniq.rakumod
format-name.rakumod
format-textwidth.rakumod
formatting.rakumod
formula.rakumod
full_enum.rakumod
full_struct.rakumod
function-locals.rakumod
function-mappings
function.rakumod
function_declaration.rakumod
get-left-margin.rakumod
gfunction-header.rakumod
git.rakumod
gjson.rakumod
gkeywords.rakumod
global-subparse.rakumod
goodbye.rakumod
grammar.rakumod
gsimple-ifdef.rakumod
gtype.rakumod
gyacc.rakumod
hasher.rakumod
hungarian.rakumod
ident-token.rakumod
ix-bang.rakumod
json-infer.rakumod
json.rakumod
line-break.rakumod
line-comment-to-block-comment.rakumod
locations.rakumod
maximally-shift-toward-left-margin.rakumod
numeric-token.rakumod
op_add.rakumod
op_bitand.rakumod
op_bitor.rakumod
op_convert.rakumod
op_div.rakumod
op_div_eq.rakumod
op_eq.rakumod
op_index.rakumod
op_mul.rakumod
op_mul_eq.rakumod
op_negate.rakumod
op_shift.rakumod
op_sub.rakumod
op_xor.rakumod
operator_indirect.rakumod
operator_into_bool.rakumod
operator_not.rakumod
operators.rakumod
ostream.rakumod
pound_define.rakumod
quoted-string-token.rakumod
reformat-block-comment.rakumod
remove-comment-tokens.rakumod
remove-double-newlines.rakumod
return-type.rakumod
rule-braced-array-literal.rakumod
rule-line-comment.rakumod
segment-remove-duplicates.rakumod
simple_ifdef.rakumod
snake-case.rakumod
static_const.rakumod
struct_members.rakumod
subgrammar.rakumod
template.rakumod
test-case.rakumod
textwidth.rakumod
time.rakumod
todo-block.rakumod
tree-mark.rakumod
type-info.rakumod
typedef_fn_ptr.rakumod
typemap.rakumod
using_declarations.rakumod
util.rakumod
vbar.rakumod
wrap-body-todo.rakumod
wrap-comment.rakumod
yacc-actions.rakumod
>;

sub do-move(:@sources, :$target) {

    @sources
    ==> map({
        my $modname = $_.split(".")[0].split(/\- | _/)>>.tc.join;
        %(src => "raku/" ~ $_, dst => $target ~ "/" ~ $modname ~ ".rakumod")
    })
    ==> map({
        my $src = $_<src>;
        my $dst = $_<dst>;

        if $src.IO.e {
            shell "mv $src $dst";
        }
    })
}

do-move(sources => @cpp-files,       target => $cpp-dir);
do-move(sources => @rust-files,      target => $rust-dir);
do-move(sources => @py3-files,       target => $py3-dir);
do-move(sources => @translate-files, target => $translate-dir);
do-move(sources => @chomper-files,   target => $chomper-dir);
