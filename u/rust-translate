#!/usr/bin/env raku

use rust-grammar;
use Data::Dump::Tree;

sub MAIN(:$stdin = Nil) {

    my $in = $stdin 
        ?? $stdin.IO.slurp.chomp 
        !! $*IN.slurp.chomp;

    $in = $in.subst(/^\s+/,"");

    my $rule = "maybe-stmts";

    my $actions = Rust::Actions.new;

    my $parsed = 
    Rust::Grammar.parse($in, :$rule, :$actions) 
    // Rust::GrammarD.parse($in, :$rule, :$actions);

    if $parsed {
        say $parsed;
        ddt $parsed.made;
    }
}
